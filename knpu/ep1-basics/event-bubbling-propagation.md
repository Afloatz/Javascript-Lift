# Event Bubbling Propagation

Okay we have one listener that when we click the delete link, we log a little message here. I want to add a second event listener. Then when I click anywhere in the row, we're also going to log a message.

Back in our template, lets actually give our entire table a js class, so that we can select it, from JavaScript. How about js-rep-log-table, and down below, we'll find that. Js-rep log table, and then we'll look for t-body, tr to find all of the tr elements. We'll do our dot on. Click, and our function and say council dot log. Row clicked. Okay, awesome.

Then we go back and refresh. No surprises. We get row clicked, but check this out. Click the delete link. Boom. It logs to do delete and then row clicked. Of course it would do this. I'm clicking both the delete link but the delete link is inside of the row so both things are being clicked. The way this works is something called event bubbling. When we click, we are causing a click event. Technically, when I click this icon here, the element that I'm clicking is actually this span that has the icon. What your browser does is it goes to that span and triggers the click event and then it goes up to the anchor and triggers the click event and then it goes up to the TD and triggers the click event.

Then up to the TR and triggers the click event, all the way up to the body tag of your entire page. The event bubbles from the lowest level up from element to element to element. That's why we see the to do delete first because that event is notified first. That element is notified first. Then we see the row clicked after as it bubbles further up.

Lets play with this little bit. First, we can clean up a little bit of our JavaScript here since the JS delete log links are also inside of the table, we could make a couple performance enhancements. First, I'm going to say var, dars and table equals dollar sign dot js rep log table. Then down below, instead of searching the entire page for these delete links, we can say table dot find and look inside of that table. Same thing down here. We'll say table dot find. Look for the t body and trs inside of that. If you refresh now, it still works great. The only thing that's interesting about this is notice I use a dollar sign in front of the table.

For Peach Tree developers that's kind of confusing because obviously dollar sign is important inside of PHP. Inside of JavScript, dollar sign is not a special character. This isn't doing anything special, it's just a convention that's commonly used to denote a variable that is a jquery object. Again, the dollar sign doesn't do anything special here. It's just a valid variable name and it's nice because down here when I see dollar sign table, I go oh, that must be a jquery element so I can call them find or any other methods on it.

A thing I really want to fix here is that whenever I click any of my delete links, I'm getting this annoying pound sign up at the top and it's scrolling me up to the top of the page. You guys have probably seen and fixed that a million times. The easiest way to fix that is at the bottom of your click function to return false. Get it out, let's go back to that pound sign, refresh, and now we can click and we don't get the pound sign. Whoa, check this out. We're also not getting the row clicked. If I click just the row, I get it, but if I click the delete icon, it only triggers the event on that element. What the heck just happened? Let's unwrap this.

First, every time you have a listener on a event, your listener function is past an event argument which is very commonly just called E. This is something that I guarantee you've used before. This E variable has lots of information on it, which we're going to talk about but it also has some controls for the event itself. The most important one is e dot prevent default. Another one is e dot stop propagation. Turns out, when you return false from your listener function, it's the same as calling e dot prevent default and e dot stop propagation. If I remove the return false now and refresh, we got the same behavior. We don't get the pound sign, but we still for some reason don't get the row clicked when we click the delete icon.

The e dot prevent defaults says ... Is the line that says don't do the default behavior for this link. The default behavior for a link in browser is to follow the href and the href of course has a pound sign in it. This is the line that prevents the pound sign from going up. E dot stop propagation says stop this event from bubbling up and this you probably don't want. There's very few cases where you have an event list in there that should be so bold that it should stop other listeners from firing, so get rid of that stop propagation, refresh, and now things are back to normal. E dot prevent default is something you're going to use in most cases. Certainly on click and on submit but not in all cases because sometimes like key press, if you prevent the default that will actually prevent the letter from going into the box.

Okay, let's talk a little bit about that event argument.
